<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Leap & Learn Original</title>
    <style>
        :root { --neon-main:#7cf9ff; --danger:#ff3b3b; --win:#ffe44d; }
        html,body { margin:0; width:100%; height:100%; overflow:hidden; font-family:Arial; background:#0a1730; }
        
        #GAME { position:relative; width:100%; height:100%; }
        #BG { position:absolute; inset:0; z-index:0; background:url("https://img.genially.com/67961b32a116fb001568a75e/c0c9010f-c3dd-42c1-b7c1-65024fa3aec6.png") center/cover no-repeat; }
        
        /* UI */
        #SCORE { position:absolute; top:30px; left:30px; font-size:20px; font-weight:900; z-index:20; color:#fff; text-shadow:0 2px 0 rgba(0,0,0,.35); }
        #TIMER { position:absolute; top:26px; left:120px; height:38px; border-radius:18px; display:flex; align-items:center; justify-content:center; gap:10px; padding:0 14px; background:rgba(255,255,255,.95); border:2px solid var(--neon-main); box-shadow:0 0 18px rgba(124,249,255,.65); z-index:20; font-weight:900; color:#053149; }
        #TIMER.danger { border-color:var(--danger); color:var(--danger); box-shadow:0 0 25px var(--danger); animation:timerPulse .8s infinite; }
        @keyframes timerPulse { 50% { transform:scale(1.07); } }
        
        #QUESTION { position:absolute; top:18px; width:100%; display:flex; justify-content:center; z-index:20; }
        #QUESTION_TXT { font-size:40px; font-weight:900; color:#0b1630; padding:10px 18px; border-radius:18px; background:rgba(255,255,255,.72); border:1px solid rgba(124,249,255,.40); box-shadow:0 0 18px rgba(124,249,255,.25); }

        /* COMBO */
        #COMBO { position:absolute; top:165px; left:50%; transform:translateX(-50%); z-index:20; padding:10px 16px; border-radius:18px; background:rgba(255,255,255,.88); border:2px solid var(--neon-main); font-weight:900; color:#043149; display:none; gap:10px; align-items:center; }
        #COMBO.show { display:inline-flex; }
        #COMBO.pulse { animation:comboPulse .55s ease; }
        @keyframes comboPulse { 0% { transform:translateX(-50%) scale(.92); opacity:0; } 100% { transform:translateX(-50%) scale(1); opacity:1; } }

        /* FROG & LILIES (Твоя оригинальная анимация) */
        @keyframes float { 0%,100% { transform:translateY(0); } 50% { transform:translateY(6px); } }
        
        #FROG_WRAP { position:absolute; left:150px; top:55%; width:110px; height:110px; z-index:15; animation:float 3.5s ease-in-out infinite; transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #FROG { width:110px; height:110px; background:url("https://img.genially.com/67961b32a116fb001568a75e/3074df22-5c73-4ad2-b0b2-491c6fc247f3.png") no-repeat center/contain; }
        #FROG.jump { animation: jumpAnim 0.6s; }
        @keyframes jumpAnim { 50% { transform: scale(1.2) translateY(-50px); } }

        .lily { width:150px; height:150px; background:url("https://img.genially.com/67961b32a116fb001568a75e/ed6c6e82-953b-43d4-947d-e46227b760f0.png") no-repeat center/contain; display:flex; align-items:center; justify-content:center; font-weight:900; animation:float 3.5s ease-in-out infinite; }
        
        #PLATFORMS { position:absolute; bottom:15%; width:100%; display:flex; justify-content:center; gap:30px; z-index:10; }
        .platform { cursor:pointer; transition: 0.3s; }

        /* SCREENS */
        #START_SCREEN, #END { position:absolute; inset:0; z-index:100; background:rgba(8,16,34,.95); display:flex; align-items:center; justify-content:center; flex-direction:column; color:white; }
        .btn { padding:15px 40px; border-radius:20px; border:2px solid var(--neon-main); background:white; color:#043149; font-weight:900; cursor:pointer; font-size:20px; margin-top:20px; }
    </style>
</head>
<body>

<div id="GAME">
    <div id="BG"></div>
    <div id="SCORE">⭐ 0</div>
    <div id="TIMER"><span id="TIMER_TXT">00:10</span></div>
    <div id="QUESTION"><span id="QUESTION_TXT"></span></div>
    <div id="COMBO"><span id="COMBO_TXT">COMBO x1.0</span></div>
    
    <div id="FROG_WRAP"><div id="FROG"></div></div>
    <div id="PLATFORMS"></div>

    <div id="START_SCREEN">
        <h1>Leap & Learn</h1>
        <p>Прыгай по лилиям, отвечая правильно!</p>
        <button class="btn" onclick="startGame()">START GAME</button>
    </div>

    <div id="END" style="display:none">
        <h1 id="END_STATUS">LEVEL COMPLETE!</h1>
        <div id="STATS" style="text-align:center; margin:20px 0;"></div>
        <button id="NEXT_BTN" class="btn">NEXT LEVEL</button>
    </div>
</div>

<script>
    const LEVELS = [
        { name: "Level 1", qs: [
            {t: "I ____ ready.", a: ["am", "is", "are"], c: 0},
            {t: "She ____ got a car.", a: ["has", "have", "is"], c: 0}
        ]},
        { name: "Level 2", qs: [
            {t: "They ____ friends.", a: ["are", "is", "am"], c: 0},
            {t: "It ____ a cat.", a: ["is", "are", "am"], c: 0}
        ]}
    ];

    let cLvl = 0, cQ = 0, score = 0, combo = 1, timeLeft = 10, timer;
    const ctx = new (window.AudioContext || window.webkitAudioContext)();

    function playJumpSound() {
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.frequency.setValueAtTime(150, ctx.currentTime);
        o.frequency.exponentialRampToValueAtTime(400, ctx.currentTime + 0.1);
        g.gain.fadeOut = 0.1;
        o.connect(g); g.connect(ctx.destination);
        o.start(); o.stop(ctx.currentTime + 0.1);
    }

    function startGame() {
        document.getElementById('START_SCREEN').style.display = 'none';
        loadQuestion();
    }

    function loadQuestion() {
        const lvl = LEVELS[cLvl];
        if (cQ >= lvl.qs.length) return showEndScreen(true);

        const q = lvl.qs[cQ];
        document.getElementById('QUESTION_TXT').innerText = q.t;
        
        const pDiv = document.getElementById('PLATFORMS');
        pDiv.innerHTML = '';
        q.a.forEach((text, i) => {
            const p = document.createElement('div');
            p.className = 'platform';
            p.innerHTML = `<div class="lily">${text}</div>`;
            p.onclick = (e) => checkAnswer(i === q.c, e.currentTarget);
            pDiv.appendChild(p);
        });
        resetTimer();
    }

    function checkAnswer(isCorrect, element) {
        if (isCorrect) {
            playJumpSound();
            const rect = element.getBoundingClientRect();
            const frog = document.getElementById('FROG_WRAP');
            
            // Твой оригинальный прыжок
            document.getElementById('FROG').classList.add('jump');
            frog.style.left = (rect.left + 20) + "px";
            
            score += 10 * combo;
            combo += 0.5;
            document.getElementById('SCORE').innerText = "⭐ " + Math.floor(score);
            
            if (combo > 1.5) {
                document.getElementById('COMBO').classList.add('show');
                document.getElementById('COMBO_TXT').innerText = "COMBO x" + combo.toFixed(1);
            }

            setTimeout(() => {
                document.getElementById('FROG').classList.remove('jump');
                cQ++;
                loadQuestion();
            }, 600);
        } else {
            combo = 1;
            document.getElementById('COMBO').classList.remove('show');
            document.getElementById('GAME').style.animation = "shake 0.3s";
            setTimeout(() => document.getElementById('GAME').style.animation = "", 300);
        }
    }

    function resetTimer() {
        clearInterval(timer);
        timeLeft = 10;
        document.getElementById('TIMER_TXT').innerText = "00:" + timeLeft;
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('TIMER_TXT').innerText = "00:" + (timeLeft < 10 ? "0" + timeLeft : timeLeft);
            if (timeLeft <= 0) { clearInterval(timer); showEndScreen(false); }
        }, 1000);
    }

    function showEndScreen(isWin) {
        clearInterval(timer);
        const screen = document.getElementById('END');
        const nextBtn = document.getElementById('NEXT_BTN');
        screen.style.display = 'flex';
        
        if (isWin) {
            document.getElementById('END_STATUS').innerText = "LEVEL COMPLETE!";
            document.getElementById('STATS').innerText = "Score: " + Math.floor(score);
            
            if (cLvl < LEVELS.length - 1) {
                nextBtn.innerText = "START " + LEVELS[cLvl+1].name;
                nextBtn.onclick = () => {
                    cLvl++; cQ = 0;
                    screen.style.display = 'none';
                    loadQuestion();
                };
            } else {
                nextBtn.innerText = "FINISH GAME";
                nextBtn.onclick = () => location.reload();
            }
        } else {
            document.getElementById('END_STATUS').innerText = "GAME OVER";
            nextBtn.innerText = "TRY AGAIN";
            nextBtn.onclick = () => location.reload();
        }
    }
</script>
</body>
</html>
